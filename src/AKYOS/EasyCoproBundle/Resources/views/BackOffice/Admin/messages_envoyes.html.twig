{% extends '@AKYOSEasyCopro/BackOffice/Admin/layout.html.twig' %}

{% block title %}
    Boite de Reception
{% endblock %}

{% block stylesheets %}
{% endblock %}

{% block titre_page %}
    Messages envoyés
{% endblock %}

{% block breadcrumb %}
    <li><a href="{{ path('admin_inbox') }}">Mes messages</a></li>
    <li class="active">Mes messages envoyés</li>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-sm-4 col-md-3">
            <!-- Inner Sidebar -->
            <!-- Compose Message (Modal markup is at the bottom of this page before including JS scripts) -->
            <div class="block-section">
                <a href="#modal-compose" class="btn btn-effect-ripple btn-block btn-success" data-toggle="modal"><i class="fa fa-pencil"></i> Nouveau message</a>
            </div>
            <!-- END Compose Message -->

            <!-- Collapsible Navigation -->
            <a href="javascript:void(0)" class="btn btn-block btn-effect-ripple btn-default visible-xs" data-toggle="collapse" data-target="#email-nav">Navigation</a>
            <div id="email-nav" class="collapse navbar-collapse remove-padding">
                <!-- Menu -->
                <div class="block-section">
                    <ul class="nav nav-pills nav-stacked">
                        <li>
                            <a href="{{path('admin_inbox')}}">
                                <i class="fa fa-fw fa-inbox icon-push"></i> <strong>Boîte de reception</strong>
                            </a>
                        </li>
                        <li class="active">
                            <a href="{{path('admin_messages_envoyes')}}">
                                <i class="fa fa-fw fa-send text-success icon-push"></i> <strong>Envoyés</strong>
                            </a>
                        </li>
                        <li>
                            <a href="{{path('admin_corbeille')}}">
                                <i class="fa fa-fw fa-trash-o icon-push"></i> <strong>Corbeille</strong>
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- END Menu -->
            </div>
        </div>
        <!-- END Inner Sidebar -->


        <div class="col-sm-8 col-md-9">
            <!-- Email Center Content -->
            <div class="block overflow-hidden">
                <!-- Message List -->
                <div id="message-list">
                    <!-- Title -->
                    <div class="block-title clearfix">
                        {#<div class="block-options pull-left" style="padding-left:18px;">#}
                        {#<label class="csscheckbox csscheckbox-primary" style="margin-right:15px;" ><input type="checkbox" id="selecctall"><span></span></label>#}
                        {#<a href="javascript:void(0)" class="btn btn-effect-ripple btn-primary" data-toggle="tooltip" title="(non fonctionnel) Supprimer"><i class="fa fa-times"></i></a>#}
                        {#</div>#}
                    </div>
                    <!-- END Title -->

                    <!-- Messages -->
                    <div class="block-content-full">
                        <table class="table table-borderless table-striped table-vcenter remove-margin">
                            <tbody>
                            <!-- Use the first row as a prototype for your column widths -->

                            {% for message in messages %}
                                <tr>
                                    <td class="td-label td-label-info text-center" style="width: 2%;">
                                        {#<label class="csscheckbox csscheckbox-primary"><input type="checkbox"><span></span></label>#}
                                    </td>
                                    <td class="text-center" style="width: 7%;">
                                        <img src="{{ vich_uploader_asset(message.destinataire, 'imageFile') }}" alt="avatar" class="img-circle">
                                    </td>
                                    <td>
                                        <h4>
                                            <a href="{{ path('admin_show_message_from_envoye', {'id': message.id}) }}" class="text-dark"><strong>{{ message.titre|limitObject }}</strong></a>
                                        </h4>
                                        <span class="text-muted"> {{ message.contenu|limitMessage }}</span>
                                    </td>
                                    <td class="hidden-xs text-center" style="width: 30px;">
                                        <!--<i class="fa fa-paperclip fa-2x text-muted"></i>-->
                                    </td>
                                    <td class="hidden-xs text-right text-info" style="width: 180px;"><em>envoyé il y a {{ message.dateEnvoi|compteRebours }}</em></td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <!-- END Messages -->
                </div>
                <!-- END Message List -->
            </div>
            <!-- END Email Center Content -->
        </div>
    </div>
    <!-- Compose Modal -->
    <div id="modal-compose" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title"><strong>Écrire un nouveau message</strong></h3>
                </div>
                <div class="modal-body">
                    {{ render(controller('AKYOSEasyCoproBundle:Admin:createMessage')) }}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ parent() }}
    <script src="{{ asset('assets/backoffice/js/messages.js') }}"></script>
{% endblock %}